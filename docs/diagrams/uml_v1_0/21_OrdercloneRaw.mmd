flowchart TD
  classDef err fill:#ffecec,stroke:#c00,color:#600
  classDef ok fill:#eaffea,stroke:#0a0,color:#060

  A([Start]) --> B[VCall]
  B --> C[New copy]
  C --> D{Alloc ok?}
  D -- No --> E_BadAlloc[Throw BadAlloc]
  D -- Yes --> E[Return raw]
  E --> Z([End])
  E_BadAlloc --> Z

  class E_BadAlloc err
  class Z ok
